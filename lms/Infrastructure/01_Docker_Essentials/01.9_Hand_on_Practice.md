**Practice 1**

**Objective:**: Set up a Kali Linux Docker image, run it, and perform basic tasks inside the container.

**Steps**:

**1.Create a Dockerfile for Kali Linux Image**

Create a directory for your Dockerfile:  
```bash  
mkdir kali-docker  
cd kali-docker  
```  
 Create a file named `Dockerfile` in this directory:  
```bash  
nano Dockerfile  
```  
Add the following content to the Dockerfile:  
```Dockerfile  
#Use the official Kali Linux base image  
FROM kalilinux/kali-rolling # Update and install some basic utilities  
RUN apt-get update && apt-get install -y \  
curl \  
vim \  
git \  
&& rm -rf /var/lib/apt/lists/* # Set the working directory inside the container  
WORKDIR /root # Start a shell by default  
CMD ["/bin/bash"]  
``` 
**2. Build the Docker Image**

Build the Docker image using the `docker build` command:  
```bash  
docker build -t my-kali-image .  
```  
The `-t my-kali-image` tags the image with the name `my-kali-image`.

**3. Run the Docker Container**

Run a container based on your new image:  
```bash  
docker run -it --name my-kali-container my-kali-image  
```  
The `-it` flag runs the container in interactive mode, allowing you to interact with it via the terminal.

 **4. Perform Basic Tasks in the Container**
 
Inside the running container, you can perform tasks such as:  
```bash
#Update package lists  
apt-get update # Install additional packages if needed  
apt-get install -y nmap # Verify installed packages  
curl --version  
vim --version  
git --version  
```

**5. Exit the Container**

To exit the container, type `exit` or press `Ctrl + D`.

 **6. Manage the Container**
 
To stop the container:  
```bash  
docker stop my-kali-container  
```  
To start the container again:  
```bash  
docker start -i my-kali-container  
```  
To remove the container when you're done with it:  
```bash  
docker rm my-kali-container  
``` 
**7. Remove the Docker Image (Optional)**

If you no longer need the Docker image, remove it using:  
```bash  
docker rmi my-kali-image  
```

**Expected Outcome**:  
The practice task should help you:  
- Build and run a Kali Linux Docker image.  
- Perform basic operations inside the container.  
- Manage the lifecycle of the Docker container and image.This hands-on exercise will give you practical experience with Docker and Kali Linux, enhancing your understanding of containerized environments.

**Practice 1**: Building a Custom Docker Image for Lens
**Objective:** Learn how to build a custom Docker image using a `Containerfile` and additional configuration files.
**Steps:**
1. Prepare the Workspace**  
Navigate to the directory where you will create the necessary files and resources for building the Docker image. ```bash  
mkdir -p /home/ajaykumar/lens-docker/images/custom/ci /home/ajaykumar/lens-docker/images/custom/resources  
cd /home/ajaykumar/lens-docker/images/custom  
```2. **Create the `Containerfile`**  
Create the `Containerfile` in the `/home/ajaykumar/lens-docker/images/custom` directory. ```bash  
touch Containerfile  
``` Add the content of the `Containerfile` from the following link:  
[Containerfile Content]([https://github.com/frappe/frappe_docker/blob/main/images/custom/Containerfile](https://github.com/frappe/frappe_docker/blob/main/images/custom/Containerfile)).3. **Create the `apps.json` File**  
Create the `apps.json` file in the `/home/ajaykumar/lens-docker/images/custom/ci` directory. ```bash  
echo '[  
{  
"url": "[https://github.com/frappe/erpnext.git](https://github.com/frappe/erpnext.git)",  
"branch": "v14.44.0"  
},  
{  
"url": "[https://github.com/frappe/payments.git](https://github.com/frappe/payments.git)",  
"branch": "version-14"  
}  
]' > /home/ajaykumar/lens-docker/images/custom/ci/apps.json  
```4. **Create the Nginx Resources**  
Navigate to the `resources` directory and create the Nginx configuration files. ```bash  
cd /home/ajaykumar/lens-docker/images/custom/resources  
``` - **nginx-entrypoint.sh:**  
Create and add the content from the following link:  
[nginx-entrypoint.sh Content]([https://github.com/frappe/frappe_docker/blob/main/resources/nginx-entrypoint.sh](https://github.com/frappe/frappe_docker/blob/main/resources/nginx-entrypoint.sh)). - **nginx-template.conf:**  
Create and add the content from the following link:  
[nginx-template.conf Content]([https://github.com/frappe/frappe_docker/blob/main/resources/nginx-template.conf](https://github.com/frappe/frappe_docker/blob/main/resources/nginx-template.conf)).5. **Verify the Directory Structure**  
Ensure that the directory structure is correct. ```bash  
tree /home/ajaykumar/lens-docker/images/custom  
``` Expected output: ```plaintext  
/home/ajaykumar/lens-docker/images/custom  
├── Containerfile  
├── ci  
│ └── apps.json  
└── resources  
├── nginx-entrypoint.sh  
└── nginx-template.conf  
```6. **Prepare `apps.json` as Base64**  
Convert the `apps.json` file into a Base64 string for use in the Docker build process. ```bash  
APPS_JSON_BASE64=$(base64 -w 0 ./ci/apps.json)  
```7. **Build the Docker Image**  
Use the prepared Base64 string and build the Docker image with specific build arguments. ```bash  
docker build --no-cache -t "lenscx:v14.51.0" \  
--build-arg FRAPPE_PATH="[https://github.com/frappe/frappe](https://github.com/frappe/frappe)" \  
--build-arg FRAPPE_BRANCH="v14.51.0" \  
--build-arg PYTHON_VERSION="3.10.12" \  
--build-arg NODE_VERSION="16.20.1" \  
--build-arg APPS_JSON_BASE64="${APPS_JSON_BASE64}" \  
-f "/home/ajaykumar/lens-docker/images/custom/Containerfile" \  
/home/ajaykumar/lens-docker/images/custom  
``` **Explanation:**  
- The `docker build` command uses various build arguments to customize the image.  
- The `APPS_JSON_BASE64` argument injects the apps configuration into the image.  
- The image is tagged as `lenscx:v14.51.0`.8. **Verify the Build**  
Once the build completes, verify the image creation. ```bash  
docker images | grep lenscx  
```**Expected Outcome:**- A Docker image named `lenscx:v14.51.0` should be created.  
- The image should contain the Frappe framework, along with Nginx configured to serve the application.
<!--stackedit_data:
eyJoaXN0b3J5IjpbODcyNTczMDk2LDIxMjc1MjM4OTddfQ==
-->