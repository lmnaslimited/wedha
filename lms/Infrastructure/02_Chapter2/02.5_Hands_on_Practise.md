

**Practice 1**:Create a Database, Bench, and Site

**Objective:** Create a Database, Bench, and Site named "lensights.docker.localhost"

## Steps:

### 1. Login to Portainer:
   - Open your web browser and navigate to your Portainer instance.
   - Log in with your credentials.

### 2. Create a New Stack for Database:
   - In the Portainer dashboard, go to **Stacks** in the left-hand menu.
   - Click on **Add Stack**.
   - Name your stack: `lensights-amr-pub-db`.
   - Copy and paste the content of `mariadb.yml` into the Web editor field, incorporating the specified environment variables:
     ```yaml
     environment:
       DB_PASSWORD: admin@123
       MARIADB_NETWORK: lensights-amr-pub-db
     ```
   - Click **Deploy the stack**.

## 3. Create a New Stack for ERPNext:**
   - Repeat the above steps to create stacks for `erpnext.yml`, `configure-erpnext.yml`, and `create-site.yml`.
   - Name each stack appropriately:
     - **Stack for ERPNext**: `lensights-amr-pub`
       - Copy and paste the content of `erpnext.yml` and set environment variables:
         ```yaml
         environment:
           IMAGE: lensights
           VERSION: v15.2
           BENCH_NAME: lensights-amr-pub
           SITES: lensights.docker.localhost
           MARIADB_NETWORK: lensights-amr-pub-db
         ```
     - **Stack for Configure ERPNext**: `configure-bench`
       - Copy and paste the content of `configure-erpnext.yml` and set environment variables:
         ```yaml
         environment:
           IMAGE: lensights
           VERSION: v15.2
           BENCH_NAME: lensights-amr-pub
           DATABASE_HOST: lensights-amr-pub-db
         ```
     - **Stack for Create Site**: `create-site`
       - Copy and paste the content of `create-site.yml` and set environment variables for the first deployment:
         ```yaml
         environment:
           IMAGE: lensights
           VERSION: v15.2
           DB_PASSWORD: admin@123
           ADMIN_PASSWORD: admin@123
           SITE_NAME: lensights.docker.localhost
           BENCH_NAME: lensights-amr-pub
           MARIADB_NETWORK: lensights-amr-pub-db
         ```

### 4. Deploying Each Stack in Portainer:**
   - Ensure that all stacks are deployed correctly:
     - For `lensights-amr-pub-db`: Deploy the database stack.
     - For `lensights-amr-pub`: Deploy the ERPNext stack.
     - For `configure-bench`: Deploy the configuration stack.
     - For `create-site`: Deploy the site creation stack, ensuring the site is correctly configured and accessible.

### Note:
- For the content of the stacks (`mariadb.yml`, `erpnext.yml`, `configure-erpnext.yml`, and `create-site.yml`), you can copy and paste from the compose directory available at: [https://github.com/lmnaslimited/lensdocker/tree/main/compose](https://github.com/lmnaslimited/lensdocker/tree/main/compose).
- Replace the environment variables as follows:
  - `IMAGE`: lensights
  - `BENCH_NAME`: lensights-amr-pub
  - `VERSION`: v15.2
  - `MARIADB_NETWORK`: lensights-amr-pub-db
  - `DATABASE_HOST`: lensights-amr-pub-db


**Expected Outcome:**
- A Docker image named `lenscx:v14.51.0` should be created. 
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTE3ODQyMjU3MCw5MjY2NDU1NCwtOTE2OD
c4NTgsLTIwODg3NDY2MTIsLTEyOTQ4NTM5MjIsMjAzNTAwOTUy
MCw0OTc4MTg4MTBdfQ==
-->