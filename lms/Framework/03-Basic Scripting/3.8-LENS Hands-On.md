# LENS Hands-On

### **Task : Create a client script that calculates and displays the age of a person based on their Date of Birth (DOB) on a custom doctype or an existing doctype.**

### Steps:

#### 1. **Set Up the Fields**:

You will need two fields:

-   **Date of Birth (DOB)**: A date field.
-   **Age**: A read-only field to display the calculated age.

#### Step-by-Step Instructions:

### **1. Add Fields to the Doctype:**

1.  **Navigate to the Doctype**:
    
    -   Go to **Explore** > **Customization** > **Doctype**.
    -   Open the doctype where you want to calculate the age (e.g., "Employee", or create a custom doctype like "Person").
2.  **Add a Field for Date of Birth (DOB)**:
    
    -   In the doctype, click on **Customize** or directly add a new field.
    -   **Field Label**: Date of Birth
    -   **Field Type**: Date
    -   **Fieldname**: dob
3.  **Add a Field for Age**:
    
    -   Add another field for the age calculation.
    -   **Field Label**: Age
    -   **Field Type**: Read Only (or Data if you want to store the value)
    -   **Fieldname**: age
4.  **Save the Doctype**.
    

### **2. Create a Client Script**:

1.  **Navigate to Client Script**:
    
    -   Go to **Explore** > **Customization** > **Client Script**.
2.  **Create a New Client Script**:
    
    -   Click on **New** to create a new client script.
    -   **Document Type**: Choose the doctype where you added the fields (e.g., "Person", "Employee").
    -   **Script Type**: Choose **Form**.
    -   **Script Name**: Give it a name like "Calculate Age from DOB".
### **3. Write the Script**:
``` javascript 
frappe.ui.form.on('Person', {
    dob: function(frm) {
        if (frm.doc.dob) {
            // Calculate the age
            const dob = new Date(frm.doc.dob);
            const today = new Date();
            
            let age = today.getFullYear() - dob.getFullYear();
            const monthDiff = today.getMonth() - dob.getMonth();

            // Adjust if the birthday hasn't occurred this year yet
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
                age--;
            }

            // Set the calculated age in the Age field
            frm.set_value('age', age);
        }
    }
});
```
**Explanation**:

-   This script listens for changes to the `dob` field.
-   It calculates the age by comparing the current date with the DOB.
-   It updates the `age` field in the form with the calculated age.

#### Expected Output:

When you enter a valid Date of Birth, the **Age** field will display the calculated age in years, updating dynamically based on the current date.
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTEyMzIzMDg5ODEsLTIwODg3NDY2MTIsNz
MwOTk4MTE2XX0=
-->