# LENS Hands-On

#### **Task 1: Adding a Custom Field to an Existing DocType**

1.  Navigate to **Settings** > **Customize Form**.
2.  In the "DocType" field, search and select the **Sales Order** DocType.
3.  Add a new field:
    -   **Label**: Delivery Priority
    -   **Fieldname**: delivery_priority
    -   **Fieldtype**: Select
    -   **Options**: High, Medium, Low (each option on a new line)
4.  Save and then navigate to **Sales Order** to verify the custom field is present.
5.  Create a new Sales Order and test the field by selecting a priority level.

#### **Task 2: Adding a Validation to a Custom Field**

1.  Go to **Custom Script** and create a new script for the **Sales Order**.
2.  Add the following code to ensure that only high-priority orders can exceed a value of 10,000:
   

 ```javascript     
    frappe.ui.form.on('Sales Order', {
       validate: function(frm) {
          if (frm.doc.delivery_priority == 'High' && frm.doc.grand_total <= 10000) {
             frappe.throw(__('High priority orders must exceed 10,000.'));
          }
       }
    
   ```

#### **Task 3: Viewing Database Mapping for a Field**

1.  Open **Sales Order** and create a new order.
2.  Open the **System Console**.
3.  Run the query to view the table structure and map fields:
```sql
SELECT * FROM `tabSales Order`;
```
4. Locate the `delivery_priority` field that you added earlier.
5. Now insert data into the Sales Order.
6. Confirm that the data entered into the field is properly mapped in the database.

#### **Task 4: Explore Link Field Mapping**

1.  In LENS, open **Sales Order** and view the **Customer** field (this is a Link field).
2.  In MariaDB, find how this field maps to the **Customer** DocType:
```sql
SELECT customer FROM `tabSales Order`;
```
3. Now query the **Customer** table:
```sql
SELECT * FROM `tabCustomer` WHERE name = '<Customer Name>';
```
4. Note how the **Link** field connects both DocTypes.

#### **Task 5: Creating a Custom Child Table**

1.  Navigate to **DocType** and create a new DocType:
    -   **Name**: Order Details
    -   **Type**: Child Table
    -   Add the following fields:
        -   **Fieldname**: item_code
        -   **Fieldtype**: Link (Link to Item)
        -   **Fieldname**: qty
        -   **Fieldtype**: Float
        -   **Fieldname**: rate
        -   **Fieldtype**: Currency
2.  Save the DocType.

#### **Task 6: Linking Child Table to a Parent DocType**

1.  Open **Customize Form** and select **Sales Order**.
2.  Add a new field:
    -   **Label**: Order Details
    -   **Fieldname**: order_details
    -   **Fieldtype**: Table
    -   **Options**: Order Details (the name of the Child Table DocType you created)
3.  Save the form and navigate to **Sales Order**.
4.  Create a new Sales Order and test the child table by adding rows of items, quantity, and rate.

#### **Task 7: Understanding Parent and Parenttype Fields**

1.  After creating a Sales Order with child table data, go to the **MariaDB** console.
2.  Query the child table:
```sql
SELECT * FROM `tabOrder Details` WHERE parent = '<Sales Order ID>';
```
3. Observe how the child table links back to the parent via the `parent` and `parenttype` fields.


<!--stackedit_data:
eyJoaXN0b3J5IjpbLTY2MDc0NTU0MywtNDQ3NDk5MDkyLC0xMz
MzNjI2MjQyLC0xNTE5NTEzMjY4LC0xMDE3MDQ0MTgyLDEyNTA1
MjM0NjYsLTIwMzE3NTExMzksMTc2NjM2NTY1NiwtMTI5NzA1OD
QwNV19
-->